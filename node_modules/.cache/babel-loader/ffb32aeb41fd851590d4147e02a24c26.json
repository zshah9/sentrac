{"ast":null,"code":"var _jsxFileName = \"/Users/zachary/capstone/madsense-app/src/MeasurementPage.js\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Modal, Typography, TextField } from \"@mui/material\";\nimport React from \"react\";\nimport { p5ble } from \"./btUtils\"; // these are global constants right here, but might need to be moved to state variables\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst receivedValues = [\"s1: 0.0\", \"s2: 0.0\", \"s3: 0.0\", \"s4: 0.0\", \"s5: 0.0\", \"s6: 0.0\", \"s7: 0.0\", \"s8: 0.0\"];\nconst sensorReadings = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0];\nlet isConnected = false;\nlet readComplete = false;\nconsole.log(\"setting up...\");\nlet blueTooth = new p5ble();\nlet blueToothCharacteristic; //this is a blu\n\nfunction takeMeasurement() {\n  let mock = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  readComplete = false;\n  let time = new Date().toLocaleDateString(\"en-US\");\n\n  if (isConnected) {\n    sendData(\"READ\");\n  } else {\n    console.log(\"Error: device not paired.\");\n\n    if (mock) {\n      return {\n        vals: Array.from({\n          length: 7\n        }, () => Math.random() * 10),\n        date: time\n      };\n    }\n  }\n\n  console.log(\"ready to write\");\n\n  for (let i = 0; i < 7; i++) {\n    sensorReadings[i] = Number(receivedValues[i].slice(3, 100));\n    console.log(\"reading: \", sensorReadings[i]);\n  }\n\n  return {\n    vals: Array.from(sensorReadings),\n    date: time\n  };\n}\n\nfunction connectToBle() {\n  // Connect to a device by passing the service UUID\n  let serviceUuid = 0xffe0;\n  blueTooth.connect(serviceUuid, gotCharacteristics);\n} // A function that will be called once got characteristics\n\n\nfunction gotCharacteristics(error, characteristics) {\n  if (error) {\n    console.log(\"error: \", error);\n  }\n\n  console.log(\"characteristics: \", characteristics);\n  blueToothCharacteristic = characteristics[0];\n  blueTooth.startNotifications(blueToothCharacteristic, gotValue, \"string\");\n  isConnected = blueTooth.isConnected(); // Add a event handler when the device is disconnected\n\n  blueTooth.onDisconnected(onDisconnected);\n} // A function that will be called once got values\n\n\nfunction gotValue(value) {\n  console.log(\"value: \", value);\n  receivedValues[value[0]] = value;\n\n  if (Number(value[0]) >= 7) {\n    readComplete = true;\n  }\n}\n\nfunction onDisconnected() {\n  console.log(\"Device got disconnected.\");\n  isConnected = false;\n}\n\nfunction sendData(command) {\n  const inputValue = command;\n\n  if (!(\"TextEncoder\" in window)) {\n    console.log(\"Sorry, this browser does not support TextEncoder...\");\n  }\n\n  var enc = new TextEncoder(); // always utf-8\n\n  blueToothCharacteristic.writeValue(enc.encode(inputValue));\n}\n\nexport default function MeasurementPage(props) {\n  _s();\n\n  const style = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: 600,\n    bgcolor: \"background.paper\",\n    border: \"2px solid #000\",\n    boxShadow: 24,\n    p: 4\n  };\n  let [open, setOpen] = React.useState(false);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: () => setOpen(false),\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          id: \"modal-modal-title\",\n          variant: \"h6\",\n          component: \"h2\",\n          children: \"Text in a modal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"modal-modal-description\",\n          sx: {\n            mt: 2\n          },\n          children: \"Duis mollis, est non commodo luctus, nisi erat porttitor ligula.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Turn on the device using the toggle switch.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Click on the \\\"Pair Device\\\" button.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Straighten your leg and put on the device. Make sure to place the silicone sheet on the front of the knee, then close the buckles on the back of the knee.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Click on the \\\"Take Measurement\\\" button and wait until measurement is complete.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      onClick: () => props.addMeasurement(takeMeasurement(true)),\n      children: \"Take Measurement\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      onClick: () => connectToBle(),\n      children: \"Pair Device\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      id: \"outlined-name\",\n      label: \"Name\",\n      value: name,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      onClick: () => props.addMeasurement(takeMeasurement(true)),\n      children: \"Take Measurement\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MeasurementPage, \"xG1TONbKtDWtdOTrXaTAsNhPg/Q=\");\n\n_c = MeasurementPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MeasurementPage\");","map":{"version":3,"sources":["/Users/zachary/capstone/madsense-app/src/MeasurementPage.js"],"names":["Box","Button","Modal","Typography","TextField","React","p5ble","receivedValues","sensorReadings","isConnected","readComplete","console","log","blueTooth","blueToothCharacteristic","takeMeasurement","mock","time","Date","toLocaleDateString","sendData","vals","Array","from","length","Math","random","date","i","Number","slice","connectToBle","serviceUuid","connect","gotCharacteristics","error","characteristics","startNotifications","gotValue","onDisconnected","value","command","inputValue","window","enc","TextEncoder","writeValue","encode","MeasurementPage","props","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","open","setOpen","useState","mt","addMeasurement","name","handleChange"],"mappings":"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","sourcesContent":["import { Box, Button, Modal, Typography, TextField } from \"@mui/material\";\nimport React from \"react\";\n\nimport { p5ble } from \"./btUtils\";\n\n// these are global constants right here, but might need to be moved to state variables\nconst receivedValues = [\n  \"s1: 0.0\",\n  \"s2: 0.0\",\n  \"s3: 0.0\",\n  \"s4: 0.0\",\n  \"s5: 0.0\",\n  \"s6: 0.0\",\n  \"s7: 0.0\",\n  \"s8: 0.0\",\n];\nconst sensorReadings = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0];\nlet isConnected = false;\nlet readComplete = false;\nconsole.log(\"setting up...\");\nlet blueTooth = new p5ble();\nlet blueToothCharacteristic; //this is a blu\n\nfunction takeMeasurement(mock = false) {\n  readComplete = false;\n  let time = new Date().toLocaleDateString(\"en-US\");\n  if (isConnected) {\n    sendData(\"READ\");\n  } else {\n    console.log(\"Error: device not paired.\");\n    if (mock) {\n      return {\n        vals: Array.from({ length: 7 }, () => Math.random() * 10),\n        date: time,\n      };\n    }\n  }\n  console.log(\"ready to write\");\n  for (let i = 0; i < 7; i++) {\n    sensorReadings[i] = Number(receivedValues[i].slice(3, 100));\n    console.log(\"reading: \", sensorReadings[i]);\n  }\n  return {\n    vals: Array.from(sensorReadings),\n    date: time,\n  };\n}\n\nfunction connectToBle() {\n  // Connect to a device by passing the service UUID\n  let serviceUuid = 0xffe0;\n  blueTooth.connect(serviceUuid, gotCharacteristics);\n}\n\n// A function that will be called once got characteristics\nfunction gotCharacteristics(error, characteristics) {\n  if (error) {\n    console.log(\"error: \", error);\n  }\n  console.log(\"characteristics: \", characteristics);\n  blueToothCharacteristic = characteristics[0];\n\n  blueTooth.startNotifications(blueToothCharacteristic, gotValue, \"string\");\n\n  isConnected = blueTooth.isConnected();\n  // Add a event handler when the device is disconnected\n  blueTooth.onDisconnected(onDisconnected);\n}\n\n// A function that will be called once got values\nfunction gotValue(value) {\n  console.log(\"value: \", value);\n  receivedValues[value[0]] = value;\n  if (Number(value[0]) >= 7) {\n    readComplete = true;\n  }\n}\n\nfunction onDisconnected() {\n  console.log(\"Device got disconnected.\");\n  isConnected = false;\n}\n\nfunction sendData(command) {\n  const inputValue = command;\n  if (!(\"TextEncoder\" in window)) {\n    console.log(\"Sorry, this browser does not support TextEncoder...\");\n  }\n  var enc = new TextEncoder(); // always utf-8\n  blueToothCharacteristic.writeValue(enc.encode(inputValue));\n}\n\nexport default function MeasurementPage(props) {\n  const style = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: 600,\n    bgcolor: \"background.paper\",\n    border: \"2px solid #000\",\n    boxShadow: 24,\n    p: 4,\n  };\n  let [open, setOpen] = React.useState(false);\n  return (\n    <Box>\n      <Modal open={open} onClose={() => setOpen(false)}>\n        <Box sx={style}>\n          <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n            Text in a modal\n          </Typography>\n          <Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n            Duis mollis, est non commodo luctus, nisi erat porttitor ligula.\n          </Typography>\n        </Box>\n      </Modal>\n      <ol>\n        <li>Turn on the device using the toggle switch.</li>\n        <li>Click on the \"Pair Device\" button.</li>\n        <li>Straighten your leg and put on the device. Make sure to place the silicone sheet on the front of the knee, then close the buckles on the back of the knee.</li>\n        <li>Click on the \"Take Measurement\" button and wait until measurement is complete.</li>\n      </ol>\n      <Button \n      variant=\"outlined\"\n      onClick={() => props.addMeasurement(takeMeasurement(true))}>\n        Take Measurement\n      </Button>\n      <Button \n      variant=\"outlined\"\n      onClick={() => connectToBle()}>\n        Pair Device\n        </Button>\n      <TextField\n        id=\"outlined-name\"\n        label=\"Name\"\n        value={name}\n        onChange={handleChange}\n      />\n      <Button \n      variant=\"outlined\"\n      onClick={() => props.addMeasurement(takeMeasurement(true))}>\n        Take Measurement\n      </Button>\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}